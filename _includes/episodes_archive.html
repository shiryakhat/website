<!-- Episodes Archive Section -->
<section id="portfolio" class="episodes-archive">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2 class="section-title animated fadeInUp">All Episodes <br> همه قسمت ها</h2>
                <div class="modern-separator dark">
                    <span></span>
                </div>
            </div>
        </div>
        <div class="row episodes-filter animated fadeInUp" style="margin-top: 0;">
            <div class="col-lg-12 text-center">
                <div class="season-filter-container">
                    <div class="filter-buttons">
                        <!-- All Seasons button first -->
                        <button class="btn btn-filter active" data-filter="all" 
                                data-title-en="{{ site.seasons.all.title }}" 
                                data-title-fa="{{ site.seasons.all.title_fa }}"
                                data-date-en="{{ site.seasons.all.date_range }}"
                                data-date-fa="{{ site.seasons.all.date_range_fa }}">
                            {{ site.seasons.all.title }}
                        </button>
                        
                        <!-- Season buttons in reverse order (S07 to S01) -->
                        <button class="btn btn-filter" data-filter="S07" 
                                data-title-en="{{ site.seasons.S07.title }}" 
                                data-title-fa="{{ site.seasons.S07.title_fa }}"
                                data-date-en="{{ site.seasons.S07.date_range }}"
                                data-date-fa="{{ site.seasons.S07.date_range_fa }}">
                            Season 7
                        </button>
                        <button class="btn btn-filter" data-filter="S06" 
                                data-title-en="{{ site.seasons.S06.title }}" 
                                data-title-fa="{{ site.seasons.S06.title_fa }}"
                                data-date-en="{{ site.seasons.S06.date_range }}"
                                data-date-fa="{{ site.seasons.S06.date_range_fa }}">
                            Season 6
                        </button>
                        <button class="btn btn-filter" data-filter="S05" 
                                data-title-en="{{ site.seasons.S05.title }}" 
                                data-title-fa="{{ site.seasons.S05.title_fa }}"
                                data-date-en="{{ site.seasons.S05.date_range }}"
                                data-date-fa="{{ site.seasons.S05.date_range_fa }}">
                            Season 5
                        </button>
                        <button class="btn btn-filter" data-filter="S04" 
                                data-title-en="{{ site.seasons.S04.title }}" 
                                data-title-fa="{{ site.seasons.S04.title_fa }}"
                                data-date-en="{{ site.seasons.S04.date_range }}"
                                data-date-fa="{{ site.seasons.S04.date_range_fa }}">
                            Season 4
                        </button>
                        <button class="btn btn-filter" data-filter="S03" 
                                data-title-en="{{ site.seasons.S03.title }}" 
                                data-title-fa="{{ site.seasons.S03.title_fa }}"
                                data-date-en="{{ site.seasons.S03.date_range }}"
                                data-date-fa="{{ site.seasons.S03.date_range_fa }}">
                            Season 3
                        </button>
                        <button class="btn btn-filter" data-filter="S02" 
                                data-title-en="{{ site.seasons.S02.title }}" 
                                data-title-fa="{{ site.seasons.S02.title_fa }}"
                                data-date-en="{{ site.seasons.S02.date_range }}"
                                data-date-fa="{{ site.seasons.S02.date_range_fa }}">
                            Season 2
                        </button>
                        <button class="btn btn-filter" data-filter="S01" 
                                data-title-en="{{ site.seasons.S01.title }}" 
                                data-title-fa="{{ site.seasons.S01.title_fa }}"
                                data-date-en="{{ site.seasons.S01.date_range }}"
                                data-date-fa="{{ site.seasons.S01.date_range_fa }}">
                            Season 1
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Season Info Display -->
        <div class="row season-info-display" id="seasonInfo" style="display: none;">
            <div class="col-lg-12">
                <div class="season-info-container">
                    <div class="season-title-section">
                        <h3 id="seasonTitleEn" class="season-title-en"></h3>
                        <h4 id="seasonTitleFa" class="season-title-fa"></h4>
                    </div>
                    <div class="season-dates-section">
                        <span id="seasonDateEn" class="season-date-en"></span>
                        <span id="seasonDateFa" class="season-date-fa"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row episodes-grid">
            {% for post in site.posts %}
                <div class="col-md-4 col-sm-6 episode-item animated fadeInUp" data-season="{{ post.episode | slice: 0, 3 }}" data-wow-delay="{{forloop.index | modulo: 6 | times: 0.1}}s">
                    <div class="episode-card">
                        <a href="{{site.url}}{{post.url}}" class="episode-link">
                            <div class="episode-image">
                                <img src="{{site.url}}/{{ post.img }}" class="img-responsive" alt="{{ post.alt }}">
                                <div class="episode-overlay">
                                    <div class="episode-info">
                                        <div class="episode-number">{{ post.episode }}</div>
                                        {% assign title_parts = post.title | split: "|" %}
                                        {% if title_parts.size > 1 %}
                                            <div class="episode-title">{{ title_parts[1] | strip | replace: '(S01E01)', '' | replace: '(S01E02)', '' | replace: '(S01E03)', '' | replace: '(S01E04)', '' | replace: '(S01E05)', '' | replace: '(S01E06)', '' | replace: '(S01E07)', '' | replace: '(S01E08)', '' | replace: '(S01E09)', '' | replace: '(S01E10)', '' | replace: '(S02E01)', '' | replace: '(S02E02)', '' | replace: '(S02E03)', '' | replace: '(S03E01)', '' | replace: '(S03E02)', '' | replace: '(S03E03)', '' | replace: '(S03E04)', '' | replace: '(S03E05)', '' | replace: '(S03E06)', '' | replace: '(S03E07)', '' | replace: '(S04E01)', '' | replace: '(S04E02)', '' | replace: '(S04E03)', '' | replace: '(S04E04)', '' | replace: '(S04E05)', '' | replace: '(S04E06)', '' | replace: '(S05E01)', '' | replace: '(S05E02)', '' | replace: '(S06E01)', '' | replace: '(S06E02)', '' | replace: '(S06E03)', '' | replace: '(S06E04)', '' | replace: '(S06E05)', '' | replace: '(S07E01)', '' | replace: '(S07E02)', '' | replace: '(S07E03)', '' | replace: '(S07E04)', '' | replace: '(S07E05)', '' }}</div>
                                        {% else %}
                                            <div class="episode-title">{{ post.title | replace: '(S01E01)', '' | replace: '(S01E02)', '' | replace: '(S01E03)', '' | replace: '(S01E04)', '' | replace: '(S01E05)', '' | replace: '(S01E06)', '' | replace: '(S01E07)', '' | replace: '(S01E08)', '' | replace: '(S01E09)', '' | replace: '(S01E10)', '' | replace: '(S02E01)', '' | replace: '(S02E02)', '' | replace: '(S02E03)', '' | replace: '(S03E01)', '' | replace: '(S03E02)', '' | replace: '(S03E03)', '' | replace: '(S03E04)', '' | replace: '(S03E05)', '' | replace: '(S03E06)', '' | replace: '(S03E07)', '' | replace: '(S04E01)', '' | replace: '(S04E02)', '' | replace: '(S04E03)', '' | replace: '(S04E04)', '' | replace: '(S04E05)', '' | replace: '(S04E06)', '' | replace: '(S05E01)', '' | replace: '(S05E02)', '' | replace: '(S06E01)', '' | replace: '(S06E02)', '' | replace: '(S06E03)', '' | replace: '(S06E04)', '' | replace: '(S06E05)', '' | replace: '(S07E01)', '' | replace: '(S07E02)', '' | replace: '(S07E03)', '' | replace: '(S07E04)', '' | replace: '(S07E05)', '' }}</div>
                                        {% endif %}
                                        {% if post.youtube %}
                                            <div class="video-tag"><i class="fa-solid fa-video"></i> Video</div>
                                        {% endif %}
                                        <div class="episode-date">{{ post.date | date: "%B %d, %Y" }}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="episode-caption">
                                <h3>
                                {% if post.youtube %}<span class="card-video-tag"><i class="fa-solid fa-film"></i></span>{% endif %}
                                {% assign title_parts = post.title | split: "|" %}
                                {% if title_parts.size > 1 %}
                                    {{ title_parts[0] | strip | replace: '(S01E01)', '' | replace: '(S01E02)', '' | replace: '(S01E03)', '' | replace: '(S01E04)', '' | replace: '(S01E05)', '' | replace: '(S01E06)', '' | replace: '(S01E07)', '' | replace: '(S01E08)', '' | replace: '(S01E09)', '' | replace: '(S01E10)', '' | replace: '(S02E01)', '' | replace: '(S02E02)', '' | replace: '(S02E03)', '' | replace: '(S03E01)', '' | replace: '(S03E02)', '' | replace: '(S03E03)', '' | replace: '(S03E04)', '' | replace: '(S03E05)', '' | replace: '(S03E06)', '' | replace: '(S03E07)', '' | replace: '(S04E01)', '' | replace: '(S04E02)', '' | replace: '(S04E03)', '' | replace: '(S04E04)', '' | replace: '(S04E05)', '' | replace: '(S04E06)', '' | replace: '(S05E01)', '' | replace: '(S05E02)', '' | replace: '(S06E01)', '' | replace: '(S06E02)', '' | replace: '(S06E03)', '' | replace: '(S06E04)', '' | replace: '(S06E05)', '' | replace: '(S07E01)', '' | replace: '(S07E02)', '' | replace: '(S07E03)', '' | replace: '(S07E04)', '' | replace: '(S07E05)', '' }}
                                {% else %}
                                    {{ post.title | replace: '(S01E01)', '' | replace: '(S01E02)', '' | replace: '(S01E03)', '' | replace: '(S01E04)', '' | replace: '(S01E05)', '' | replace: '(S01E06)', '' | replace: '(S01E07)', '' | replace: '(S01E08)', '' | replace: '(S01E09)', '' | replace: '(S01E10)', '' | replace: '(S02E01)', '' | replace: '(S02E02)', '' | replace: '(S02E03)', '' | replace: '(S03E01)', '' | replace: '(S03E02)', '' | replace: '(S03E03)', '' | replace: '(S03E04)', '' | replace: '(S03E05)', '' | replace: '(S03E06)', '' | replace: '(S03E07)', '' | replace: '(S04E01)', '' | replace: '(S04E02)', '' | replace: '(S04E03)', '' | replace: '(S04E04)', '' | replace: '(S04E05)', '' | replace: '(S04E06)', '' | replace: '(S05E01)', '' | replace: '(S05E02)', '' | replace: '(S06E01)', '' | replace: '(S06E02)', '' | replace: '(S06E03)', '' | replace: '(S06E04)', '' | replace: '(S06E05)', '' | replace: '(S07E01)', '' | replace: '(S07E02)', '' | replace: '(S07E03)', '' | replace: '(S07E04)', '' | replace: '(S07E05)', '' }}
                                {% endif %}
                                </h3>
                                <div class="card-footer">
                                    <div class="episode-platforms">
                                        {% if post.youtube %}
                                        <a href="{{ post.youtube }}" target="_blank" class="platform-icon youtube">
                                            <i class="fa-brands fa-youtube"></i>
                                        </a>
                                        {% endif %}
                                        {% if post.spotify %}
                                        <a href="{{ post.spotify }}" target="_blank" class="platform-icon spotify">
                                            <i class="fa-brands fa-spotify"></i>
                                        </a>
                                        {% endif %}
                                        {% if post.apple_podcast %}
                                        <a href="{{ post.apple_podcast }}" target="_blank" class="platform-icon apple">
                                            <i class="fa-brands fa-apple"></i>
                                        </a>
                                        {% endif %}
                                    </div>
                                    <div class="episode-meta">
                                        <div class="meta-container">
                                            <span class="episode-date"><i class="fa-regular fa-calendar"></i> {{ post.date | date: "%b %d, %Y" }}</span>
                                            <span class="episode-number">{{ post.episode }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>